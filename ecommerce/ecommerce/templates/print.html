<!-- report_template.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Shopping Cart Report</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<div class="row mx-auto">
    <div class="col-12 col-sm-12 col-md-12 col-lg-6 text-center">
        <h2 class="text-center my_title">ABC Shopping Cart Summary</h2>
        <p class="text-center">Report generated on: {% now "Y-m-d H:i:s" %}</p>
</div>

<div class="row mx-auto">
    <div class="col-md-12">
        <table class="table my_custom_table">
            <thead>
                <tr>
                    <th class="text-start">Product Name</th>
                    <th class="text-start">Quantity</th>
                    <th class="text-start">Amount</th>
                    <th class="text-start">Total</th>
                </tr>
            </thead>
            <tbody>
            {% for cart_item in cart_items %}
                <tr>
                    <td class="text-start">{{ cart_item.product.name }}</td>
                    <td>{{ cart_item.quantity }}</td>
                    <td>{{ cart_item.product.price }}</td>
                    <td>{{ cart_item.sub_total }}</td>
                </tr>
            {% endfor %}

            <!-- ... existing code ... -->

                    <!-- ... existing code ... -->

                    <tr>
                        <td colspan="3" align="right"><strong>Total:</strong></td>
                        <td>
                            {# Calculate the total of all subtotals for each cart item #}
                            {% with subtotal=0 %}
                                {% for cart_item in cart_items %}
                                    {% with item_subtotal=cart_item.sub_total %}
                                        {% with subtotal=subtotal|add:item_subtotal %}
                                        {% endwith %}
                                    {% endwith %}
                                {% endfor %}
                            {% endwith %}
                            â‚¹ {{ total }}
                        </td>
                    </tr>


              </tbody>
        </table>
    </div>
</div>

 </body>
</html>
